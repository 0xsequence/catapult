name: "min-balance"
type: "template"
description: "Ensures a minimum balance for any given address"

arguments:
  address:
    type: "address"
    description: "The address to check the balance of"
  balance:
    type: "uint256"
    description: "The minimum balance required"

actions:
  - type: "send-transaction"
    arguments:
      to: "{{address}}"
      value:
        type: "basic-arithmetic"
        arguments:
          operation: "sub"
          values:
            - "{{balance}}"
            - type: "read-balance"
              arguments:
                address: "{{address}}"

skip_condition:
  - type: "basic-arithmetic"
    arguments:
      operation: "gte"
      values:
        - type: "read-balance"
          arguments:
            address: "{{address}}"
        - "{{balance}}"